---
date created: 星期四, 六月 6日 2024, 8:49:18 晚上
date modified: 星期二, 六月 11日 2024, 7:52:02 晚上
tags: 
---

# 2g1-分段寻址

8086 是一款 16 位的处理器，但它使用 20 位地址线来访问更大的内存空间。为了实现这一点，引入了分段寻址机制。

## 8086使用20位地址线的原因

在 20 世纪 70 年代，处理器普遍是 16 位的，这导致内存空间受限于 64KB。然而，按照摩尔定律，内存容量呈指数增长，因此处理器需要支持更大的内存空间。

为了解决这个问题，英特尔决定将 8086 设计为支持 1MB 的内存空间，这需要 20 位地址线。同时，为了保留对早期处理器（如 8080 和 8085）的向前兼容性，8086 依然保持 16 位的架构设计。至于为什么不直接设计成 20 位或 32 位处理器，主要是出于成本和兼容性的考量。

根据其前身 8080 和 8085 的设计，它们使用 16 位的地址空间，最多只能访问 2^16 = 65,536 个地址，即 64KB 的空间。而将地址线拓展为 20 位后，8086 可以访问 2^20 = 1,048,576 个地址，对应 1MB 的内存空间。

## 分段寻址方式

由于8086内部是16位处理器，无法直接给出一个20位的地址。对应的解决方案是将内存分为多段，每个段长64KB，每个段内可以通过16位地址直接访问。因此访问内存的方式就变成了先确定访问哪个段，再访问段内64KB空间的某个地址。

段地址明确一下，其实是指该内存段的起始地址，按理来讲应当也是一个20位的内存地址，但是由于处理器的限制，段地址也只能按照16位去存储。

那么如何将20位的段地址压缩到16位里呢，答案是[[对齐]]，段地址被强制设定为64KB对齐，即

因此就丢掉了后四位进行存储，使用段地址时也是取出来后左移4位。

为此8086每次访问物理地址时都需要现场计算物理地址，具体算法为寄存器地址左移4位，加上偏移量，即可得到20位的物理地址。