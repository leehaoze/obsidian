---
date created: 星期二, 四月 9日 2024, 8:58:47 晚上
date modified: 星期三, 五月 29日 2024, 7:11:24 晚上
tags: 
---

# 3c2-线程的实现

线程主要有三种实现方案：
- 用户线程
- 内核线程
- 轻量级进程

这三种实现方案的出现也与操作系统的发展相关

## 用户线程

早期的操作系统还没出现线程，是程序员直接在应用程序中自行实现线程管理，因此被称为用户级线程。后来也发展出了一些用户级线程库，方便应用程序实现使用线程。

### 优点

- 用户级线程其实是应用程序本身的行为，用户级线程的创建、调度和销毁都是在用户空间完成的，不涉及操作系统内核，避免了内核态和用户态切换的开销。

### 缺点

操作系统完全不知道用户级线程的存在，因此仍然以进程为进本单位进行调度，进而带来以下问题：
- 无法充分利用多核CPU
- 如果某个线程发生了阻塞，会导致整个进程阻塞。

## 内核线程

操作系统后续提供了对线程的直接支持，即内核线程，由内核来管理线程。

### 优点

- 支持多核
- 单线程阻塞，不影响同进程下其他线程的运行

### 缺点

- 内核线程的创建、调度、销毁都需要操作系统进行系统调用，随后发生用户态和内核态的切换，整体的代价比较大，和调度进程差不多。

## 轻量级线程

[[3c23-轻量级线程]]

