---
date created: 星期五, 五月 31日 2024, 4:00:44 下午
date modified: 星期五, 五月 31日 2024, 4:15:30 下午
tags: 
---

# 3e3a-乐观锁

乐观锁，建立在乐观的态度上，假设数据发生冲突的概率比较小，因此在操作数据时不会加锁，在真正要更新数据时会检查数据是否有冲突，如果没有冲突则修改，如果有冲突，则重试或者放弃。

## 实现方式

- 版本号：记录下修改前的版本号，更新时检查版本号是否是修改前读取到的版本号，是则更新，不是则说明已被修改，放弃。

## 场景

- 读多写少的场景

## 优点

- 不需要加锁，开销小

## 缺点

- 冲突时，重试或者放弃的代价比较大

## Case

git就是乐观锁，允许你先编辑代码，提交时判断是否发生了冲突，发生了冲突则需要自行解决冲突。