---
date created: 星期一, 三月 4日 2024, 9:48:38 晚上
date modified: 星期二, 三月 12日 2024, 10:31:56 上午
tags: 
---

# 为什么需要线程

在传统的[[001-进程管理]]中，每个进程只有一个程序计数器，也就意味着同一时间，你的程序只能在执行一条指令。如果程序想要独立执行多个任务，就只能创建多个进程。

首先这与进程的定义就有所冲突，进程的出现是为了管理一个个不相关联的程序，对应的进程与进程之间隔离是非常彻底的。对于同属于一个程序的多个进程，必然牵扯到一些公共的数据逻辑，而进程之间的通讯是非常麻烦的。尽管在程序层面，这多个进程属于同一个程序，但是在操作系统层面，这些进程都是相互独立的。

其次进程作为分配资源的单位，操作系统为了达到让每个进程都在独占本机器资源的错觉，维护了大量的上下文，同时进程作为调度的单位，操作系统进行调度时，需要付出比较大的时空开销，这与想要充分利用CPU的想法是不符的。

同时随着多核CPU的出现，每个程序的编写者也希望能够利用多核获得一些性能上的收益。

为了解决上边所述的两个问题：
1. 程序需要同时执行多个独立任务，比如一个任务处于阻塞状态时，想要执行其他的任务。
2. 操作系统对进程的调度需要付出比较大的时空开销

操作系统又引入了线程，以进程为基本单位分配资源，以线程为基本单位进行调度。这样一来，一个程序可以同时执行多个任务，当某个任务被阻塞时，不会影响到其他任务的执行，也可以利用多核CPU的特性，充分利用CPU的每个核心。

## 引用

[Threads](https://www.cs.uic.edu/~jbell/CourseNotes/OperatingSystems/4_Threads.html#:~:text=Threads%20are%20very%20useful%20in,tasks%20to%20proceed%20without%20blocking.)

